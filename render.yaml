services:
  - type: web
    name: backend
    env: docker
    repo: https://github.com/Trumanchho/omr-jianpu-melody-generator
    dockerfilePath: flask-server/Dockerfile
    dockerContext: flask-server
    plan: free
    regions:
      - oregon
    envVars:
      FLASK_ENV: production

  - type: web
    name: frontend
    runtime: static
    rootDir: omr-project
    buildCommand: npm install && npm run build
    staticPublishPath: dist
    publishPath: dist
    plan: free
